# [178. Rank Scores](https://leetcode.com/problems/rank-scores/description/)

Medium

### Solutions

- Method 1:\
  window function - `DENSE_RANK() OVER()`

```mysql
SELECT 
    score,
    DENSE_RANK() OVER(ORDER BY score DESC) AS `rank`
FROM Scores
;
```


- Method 2:\
  rank: count how many **distinct** values are larger than or equal to current value.

  WRONG:
  - There can be duplicate scores.
```
SELECT 
    t1.score,
    count(DISTINCT t2.score) AS `rank`
FROM Scores t1 INNER JOIN Scores t2
    ON t1.score <= t2.score
GROUP BY t1.score
ORDER BY t1.score DESC;
```

  CORRECT:
  add `id` into GROUP BY condition, apart from `score`.
```mysql
SELECT 
    t1.score,
    count(DISTINCT t2.score) AS `rank`
FROM Scores t1 INNER JOIN Scores t2
    ON t1.score <= t2.score
GROUP BY t1.id, t1.score
ORDER BY t1.score DESC
;
```
